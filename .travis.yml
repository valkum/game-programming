language: cpp
compiler: clang
notifications:
  slack: gamepros:8J6TWKw3BdVJkXqRQ8hPNa7r
env:
  - PKG_CONFIG_PATH="$PKG_CONFIG_PATH:$HOME/glfw3/lib/pkgconfig"
os:
  - linux
  - osx
addons:
  sources: ['george-edison55-precise-backports', 'ubuntu-toolchain-r-test', 'llvm-toolchain-precise-3.6']
  apt:
    packages:
      - cmake
      - xorg-dev
      - libgl1-mesa-dev
      - pkg-config
      - clang-3.6
cache:
  directories:
  - $HOME/glfw3
before_install:
  - if [ $TRAVIS_OS_NAME == osx ]; then brew update; brew install glfw3; brew install llvm37; brew link --force llvm37; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then bash travis_get_glfw3.sh; fi

script:
  - if [ $TRAVIS_OS_NAME == linux ]; then sh "export CXX=clang++-3.6; export C=clang-3.6; export CXXFLAGS=-lstdc++; ./build.sh"; fi
  - if [ $TRAVIS_OS_NAME == osx ]; then sh ./build.sh; fi
